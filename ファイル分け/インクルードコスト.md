## ゲーム制作講座

# #includeの仕様

```#include``` はコンパイル前に指定したファイルの内容をその場所に貼り付ける。  

悪用すればcsvファイルの内容を直接配列に渡すこともできる。  
```cpp
int arr[] = {
    #include"data.csv"
};
```

# インクルードコスト

あるヘッダーファイルにおいて、どれくらいの数のcppファイルにインクルードされているかを表す言葉としてインクルードコストというものがある。  
多くのファイルにインクルードされていればインクルードコストが高い、逆は低いという。  

# リコンパイル

一度コンパイルされたファイルを再度コンパイルすることをリコンパイルという。  
ファイルの内容が変更されたら当然リコンパイルが必要になる。  
VisualStudio含む多くのIDEでは変更されたファイルのみをリコンパイルするように設計されている。  
インクルードの仕様を思い出すと、ヘッダーファイルが変更されたとき、それをインクルードしているcppファイルもリコンパイルされる。  
インクルードコストが高いファイルを作ってしまうとリコンパイルされるファイルが膨大になってしまい、とても時間がかかってしまう。  
ゲーム制作において、規模が大きくなってくるとリコンパイルの時間がとても重要になってくる。  
大きなプロジェクトでは全体をリコンパイルすると数時間ないし数日かかるものもある。  
個人製作の範囲でも数分から数十分かかることも十分ありうる。  
そのため、インクルードコストを減らすコーディング技術が必要になってくる。  

# クラスのファイル分け

関数は返り値や引数などのインターフェースが変更されることは、内容の変更にくらべたらとても少ない。  
一方クラスは、メンバの追加や削除は頻繁に起こりうる。  
クラスの定義が書かれたヘッダーファイルはインクルードコストが高くなりがちなのでこれを減らすことは重要だ。  

まずは次のコードを見てほしい。  

```cpp
/* A.hpp */
class A {
public:
    A();
};
```

```cpp
/* A.cpp */
#include"A.cpp"

A::A() {
}
```

```cpp
/* B.hpp */
#include"A.hpp"
class B {
public:
    B();
    A a;
};
```

```cpp
/* B.cpp */
#include"B.hpp"
B::B() : 
    a()
{}
```

```cpp
/* C.hpp */
#include"B.hpp"
class C {
public:
    C();
    B b;
};
```