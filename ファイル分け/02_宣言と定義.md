## ゲーム制作講座

宣言と定義はファイル分けの理解に非常に重要である。  

# 関数の宣言と定義

```cpp
#include<iostream>

void f() {
    std::cout << "Hello World" << std::endl;
}

int main() {
    f();

    return 0;
}
```

```Hello World``` と表示する関数```f```を実行するだけのプログラムだ。  

このプログラムは以下のように書き換えることもできる。  

```cpp
#include<iostream>

void f();

int main() {
    f();

    return 0;
}

void f() {
    std::cout << "Hello World" << std::endl;
}
```

ここで登場する```void f();``` がプロトタイプ宣言と呼ばれる関数の**宣言**である。  
関数の宣言には、関数を呼び出すための必要十分な情報が含まれている。  
main関数内では関数fの中身は知らないが、返り値の型と引数の型と個数の情報があるため呼び出すことができる。  

一方で関数の中身を記した部分が関数の**定義**である。  
基本的に定義は一つのプロジェクトで一つのみという制約がある。  
そのため、同じ関数が異なる内容で複数回定義されるとリンカエラーが起きる。  

例外として、関数の中身が同じ場合、複数回定義されてもエラーにならない場合がある。  
(インラインの回に解説)  

# グローバル変数の宣言と定義

```cpp
#include<iostream>

extern int a;

int main() {
    std::cout << a << std::endl;
}

int a = 10;
```

```extern int a;``` がグローバル変数の宣言である。  
グローバル変数を用いるには型の情報だけがあれば十分である。  
そのため、main関数内でaの中身を表示することができる。  

```int a = 10;``` の部分がグローバル変数の定義である。  
関数同様、定義は一つのプロジェクトに一つのみという制約がある。  
これにも例外はあるが、いつかきっとどこかで説明する。  

# クラスの宣言と定義

```cpp
#include<iostream>

class Hoge;

int main() {
    Hoge *p = nullptr;

    std::cout << p << std::endl;
}

class Hoge {
public:
    int a;
};
```

```class Hoge;```の部分がクラスの(前方)宣言である。  
クラスの宣言のみでできることは
・ポインタ型の使用
・参照型の使用
・関数の返り値の型
・関数の引数の型
など、クラスの中身が必要ないことのみだ。  

一方でクラスのメンバを書いた部分がクラスの定義である。  
内容が一致している前提で一つのプロジェクトに複数あっても問題ない。  
ただし、クラスの定義は一つのファイルには一つのみという制約は存在する。  
内容が一致していない場合でもコンパイルできてしまうことがあるが、これは危険なので避けるように組む必要がある。  

# クラスのメンバの宣言と定義

```cpp
class Hoge {
    int a; //定義
    void f() {} //定義
    void g(); //宣言
    static int b; //宣言
    static void h() {} //定義
    static void i(); //宣言
};

void Hoge::g() { //定義
}

int Hoge::b = 10; //定義

void Hoge::i() { //定義
}
```

