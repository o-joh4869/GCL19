## ゲーム制作講座

# インライン関数

実行ファイルを開いたとき、関数の内容はメモリ上のどこかにコピーされる。  
そして関数を呼び出すときに関数の内容をコピーしてきて実行し、終わったら破棄される。  
しかし単純な関数の場合、その内容を埋め込んでしまった方が速いことがある。  
コンパイラが速度を上げるために関数を埋め込むことをインライン化という。  

このインライン化を行うには、関数の定義の前に```inline```とつけるだけだ。  

```cpp
extern int a;

inline void f() {
    a++;
}
```

宣言と定義で分けるときにはどちらかにinlineをつければいい。  

```cpp
inline void f();
extern int a;
void f() {
    a++;
}
```

ただし、コンパイラが何を埋め込めばいいかを把握するため、インライン関数を使用するファイルでは関数の定義が必要になる。  
そのため、インライン関数はヘッダーファイルに直接実装を書くといい。  

また、inlineをつけてもインライン化されないこともある。  

# 勝手にインライン化

inlineをつけなくてもインライン化される例がある。  

```cpp
/* Hoge.hpp */

class Hoge {
private:
    int a;
public:
    int get() {
        return a;
    }
};
```

メンバ関数の定義を宣言と同時に行うとインライン関数になる。  
インラインメンバ関数は内部リンケージを持つ。  

また、コンパイラの最適化の度合によっては自動で行われることもある。  
