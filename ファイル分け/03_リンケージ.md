## ゲーム制作講座

単にリンケージといってもいくつかあるが、ここでは外部リンケージと内部リンケージについて紹介する。  

# 外部リンケージ

外部リンケージを持つものはファイルの外部から利用できる。  

```cpp
/* MyGlobal.cpp */
#include<iostream>

extern int a = 10;

extern void f() {
    std::cout << "Func" << std::endl;
}
```

```cpp
/* Main.cpp */
#include<iostream>
extern int a;
void f();

int main() {
    std::cout << a << std::endl;

    f();

    return 0;
}
```

グローバルな変数や関数などに```extern```をつけると外部リンケージを持たせることができる。  
外部リンケージを持たせる```extern```は省略できるので、
```cpp
/* MyGlobal.cpp */
#include<iostream>

int a = 10;

void f() {
    std::cout << "Func" << std::endl;
}
```
とすることもできる。  

外部リンケージを持つものはコンパイル時に名前情報が破棄されず、リンカがほかのファイルの定義や宣言と結びつけてくれる。  
二重定義していたり定義がなかったりするとリンカエラーになる。  

# 内部リンケージ

内部リンケージを持つものは外部から利用できない。  
グローバルな変数や関数に内部リンケージを持たせるには```static```をつける。  

```cpp
/* MyGlobal.hpp */
#include<iostream>

static int a = 10;

static void f() {
    std::cout << a << std::endl;
}

void g() {
    f(); //同じファイル内なので利用可
}
```

```cpp
/* Main.cpp */

void g(); //外部リンケージを持つので利用可

//コメントアウトを外すとリンカエラー
//extern int a; //MyGlobalのaは内部リンケージなので定義なし

int main() {
    g();

    return 0;
}
```

内部リンケージを持つものはコンパイル時に名前情報が破棄されるため、別のものに同じ名前を使っていてもリンカエラーにならない。  

```cpp
/* Main.cpp */
#include<iostream>
void g();

int a = 20; //MyGlobalのaとは別

int main() {
    g(); //MyGlobalのaを表示

    std::cout << a << std::endl; //このファイル内のaを表示

    return 0;
}
```