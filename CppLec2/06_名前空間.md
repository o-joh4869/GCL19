## ゲーム制作講座

名前空間について紹介する。  

# 名前空間

名前空間は変数名や関数名などの衝突を避けるために必要なものである。  
複数人でコードを書く場合や規模が大きくなってきたときによく活躍する。

```cpp
namespace A {
    void f();
}
```

のようにして書くことで関数fを名前空間Aの中に宣言できる。   

関数の定義は宣言したときに同時に  

```cpp
namespace A {
    void f() {

    }
}
```
と書くこともできるし、  

```cpp
void A::f() {

}
```

と書くこともできる。  
さらに
```cpp
namespace A {
    void f();
}

namespace A {
    void f(){

    }
}
```
ともできる。  
namespaceはクラスと違って自由にメンバを追加できる。  

ここで登場する  
```cpp
A::
```
はAの中のという意味で、::はスコープ解決演算子と呼ばれている。  

実際に名前空間Aの中に定義された関数fを呼び出すときは  
```cpp
A::f()
```
と書く。  

# 名前空間の入れ子

名前空間の中に別の名前空間を作成することもできる。

```cpp
namespace A {
    void f();
    namespace B {
        void f();
    }
}
```

呼び出すときは
```cpp
A::f();
A::B::f();
```
とする。  

もちろんもっと深く名前空間を定義することもできる。  

# 名前空間の別名

名前空間に別名を付けることで表記を楽にすることができる。  

```cpp
namespace ns = namespace0123456789
```
とすることでnsをnamespace0123456789と同等に扱うことができる。  

入れ子になった名前空間に対しても別名を定義できて  

```cpp
namespace ns = A::B::C;
```

と書くことでnsをA::B::Cと同等に扱える。  

# Tipps : グローバル変数と名前空間の別名

名前空間の別名は一見グローバル変数と同じように思える。  
しかし、名前空間の別名のスコープはそのcppファイル内のみで、別のcppファイルで使われた別名とリンクさせることはない。  
(そもそも名前空間の別名を宣言することはできない。)  

あるcppファイルで  
```cpp
namespace ns = std;
```
として、別のcppファイルで  
```cpp
namespace ns = namespace0123
```
として、名前を衝突させてもエラーにならず正常に動作する。  

# using

名前空間を毎回書くのは面倒である。  
usingで名前空間を指定することで省略できる。  

具体例を見ていこう。  
上の例と同じく  
```cpp
namespace　A {
    void f();
}
```
のように関数f()が宣言されていたとする。

呼び出す前のどこかで
```cpp
using namespace A;
```
と書くことで関数f()を呼び出すとき、単に

```cpp
f();
```
と書くだけで名前空間Aのf()が呼び出せる。  

また、その名前空間全体ではなく、指定した関数や変数のみの入力を省略することもできる。  
```cpp
namespace A {
    void f();
    void g();
}
using A::f;

int main() {
    f();
    A::g();
    //g()
    // ↑ コメントアウトを外すとコンパイルエラー
}
```

usingには大きな弊害がある。  

以下の例を見てみよう。  
```cpp
void f();
namespace A {
    void f();
}

using namespace A;

int main() {
    f();
}
```

main関数内のf()は::fと、A::fのどちらを呼び出すか判別できず、コンパイルエラーになってしまう。  
小規模なcppファイルを除いてusingは使わない方が賢明だ。  
使うとしてもstd名前空間のみにとどめておくのが妥当である。  

# 練習問題

次の関数fがあったとする。  
```cpp
void f() {
    std::cout << "function f" << std::endl;    
}
```
この関数を名前空間Aの中に定義し、メイン関数内で呼び出せ。  
そのとき、main関数の前で宣言してmain関数の後で中身を定義する形にすること。  
この資料内で紹介したいくつかの定義の仕方のどれを用いてもよい。  