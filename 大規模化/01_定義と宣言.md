## ゲーム制作講座
***
定義や宣言といった単語は何度か聞いたことがあると思う。  
その意味がはっきりわかっていない人もいると思うのでここで紹介しておく。  
ファイル分けの理解に非常に重要である。  

# 関数の定義と宣言

関数を作るとき、プロトタイプ宣言というものがあったことを覚えているだろうか。  

main関数である関数fを使いたかったらそれよりも前に関数を作るか、プロトタイプ宣言をして後ろに作るかの二択があったはずだ。  

前者は
```cpp
void f() {
    cout << "関数fが呼ばれました。" << endl;
}

int main() {
    f();
    return 0;
}
```
とかけて、後者は

```cpp
void f();

int main() {
    f();
    return 0;
}

void f() {
    cout << "関数fが呼ばれました。" << endl;
}
```

と書ける。  

この時、
```cpp
void f();
```
にあたるものがプロトタイプ宣言で、宣言にはほかにも種類があるのでまとめて宣言という。  

また、
```cpp
void f() {
    cout << "関数fが呼ばれました。" << endl;
}
```

にあたるものが定義である。  

日本語でまとめよう。  
main関数内で関数fを呼び出すところをコンパイルするときに必要なものは関数名、引数の型や数、返り値の型があれば十分である。  
この情報だけを記述したものが宣言である。  

また、実際に実行するときには具体的な処理が必要である。
この情報を記述したものが定義である。  

# 変数の定義と宣言

変数を定義するとき
```cpp
int a;
```
のように書く。  
何をいまさらという感じである。  

では変数を宣言したいときはどうすればいいのだろう。  

ファイル分けを何となくやったことがある人は、グローバル変数をヘッダーファイルに書くときexternとつけていたことを覚えているだろうか。  
とりあえずそうするものとして書いていた人も多いと思うが、実はexternをつけるとそれは宣言になる。  

つまり、変数を宣言するには
```cpp
extern int a;
```
と書く。  

ここでまとめなおす。  
宣言とは、コンパイラに識別子などの情報を教えてあげるものである。  
定義とは、識別子の指す先に実体を確保するものである。  

これはポインタの話と結びつけると理解しやすい。  
以下やや実際と異なる部分もあるが、誤解を恐れず説明する。  

変数名や関数名(識別子という)に対応したポインタ変数のようなものがコンパイル時に生成される。  
宣言されたとき、識別子が同じならば同じ領域を指し示すポインタ変数に置き換わる。  
ポインタ変数は、そのアドレスの先にどの型の実体があるのかを知っている必要がある。  
だから宣言には型情報が必要になる。  
変数や関数を使いたいときはそのポインタを介して実体にアクセスする。  
コンパイル時にその具体的な中身がわかっていなくても問題がない。  
ポインタ変数に何が入っているかはnullptrを除いて全くわからないが、処理は書けるし問題なく動作する。  
そして実行時になって定義に従ってメモリが確保され、ポインタ変数にその先頭アドレスが格納される。  
関数ならば処理の内容が書かれるし、変数ならば初期化子が指定されていればそれに応じてメモリに格納されていく。  
同じ識別子のものを何度宣言しても問題はないが、定義は唯一である必要があることは明らかだろう。  

長々と説明してきたが、今わからなくても次回ファイル分けについて紹介するのでそのあとで見返してみると理解しやすいと思う。  

# クラスの定義と宣言

クラスも定義と宣言で分けることができる。  
いままでファイル分けの際もクラスは定義と宣言で分ける必要はなかった。  
しかし、次回紹介する内容でクラスの宣言について知っている必要があるので紹介する。  

クラスは
```cpp
class MyClass {

};
```

として定義できる。  
これにはなじみがあるだろう。  

クラスを宣言するには
```cpp
class MyClass;
```
とかく。  

クラスを宣言した後なら、そのクラスのポインタ変数と引数、返り値としてならそのクラスを使うことができる。  

いまいち必要性を感じないかもしれないが、次回よくわかるだろう。  